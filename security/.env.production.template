# Production Environment Configuration Template for Superego MCP
# Copy this file to .env.production and customize for your deployment
# SECURITY: Never commit actual secrets to version control

# ============================================================================
# CORE SERVER CONFIGURATION
# ============================================================================

# Server binding configuration
SUPEREGO_HOST=0.0.0.0
SUPEREGO_PORT=8000
SUPEREGO_ENV=production

# Logging configuration
SUPEREGO_LOG_LEVEL=info
SUPEREGO_LOG_FORMAT=json
SUPEREGO_LOG_FILE=/app/logs/superego.log

# Configuration file path
SUPEREGO_CONFIG_PATH=/app/data/config.yaml
SUPEREGO_RULES_PATH=/app/data/rules.yaml

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# API Security
SUPEREGO_API_KEY=your_secure_api_key_here_min_32_chars
SUPEREGO_API_KEY_HEADER=X-Superego-API-Key

# CORS Configuration
SUPEREGO_CORS_ORIGINS=https://your-domain.com,https://api.your-domain.com
SUPEREGO_CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
SUPEREGO_CORS_HEADERS=Content-Type,Authorization,X-Superego-API-Key

# Rate Limiting
SUPEREGO_RATE_LIMIT_ENABLED=true
SUPEREGO_RATE_LIMIT_REQUESTS=100
SUPEREGO_RATE_LIMIT_WINDOW=60
SUPEREGO_RATE_LIMIT_STORAGE=redis://redis:6379/1

# Request Timeouts
SUPEREGO_REQUEST_TIMEOUT=60
SUPEREGO_KEEPALIVE_TIMEOUT=5

# TLS Configuration (if using HTTPS termination at app level)
SUPEREGO_TLS_ENABLED=false
SUPEREGO_TLS_CERT_PATH=/app/certs/server.crt
SUPEREGO_TLS_KEY_PATH=/app/certs/server.key

# ============================================================================
# AI SERVICE CONFIGURATION  
# ============================================================================

# AI Provider Configuration
SUPEREGO_AI_PROVIDER=anthropic
SUPEREGO_AI_MODEL=claude-3-haiku-20240307
SUPEREGO_AI_TIMEOUT=30
SUPEREGO_AI_MAX_RETRIES=3

# Anthropic Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_API_URL=https://api.anthropic.com

# OpenAI Configuration (if using OpenAI)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_URL=https://api.openai.com/v1

# AI Circuit Breaker
SUPEREGO_AI_CIRCUIT_BREAKER_ENABLED=true
SUPEREGO_AI_CIRCUIT_BREAKER_THRESHOLD=5
SUPEREGO_AI_CIRCUIT_BREAKER_TIMEOUT=60
SUPEREGO_AI_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=300

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================

# Server Performance
SUPEREGO_WORKERS=1
SUPEREGO_MAX_REQUESTS=1000
SUPEREGO_MAX_REQUESTS_JITTER=50

# Memory and Resource Limits
SUPEREGO_MEMORY_LIMIT=2G
SUPEREGO_CPU_LIMIT=2.0

# Request Queue Configuration
SUPEREGO_QUEUE_SIZE=100
SUPEREGO_QUEUE_TIMEOUT=30

# Caching Configuration
SUPEREGO_CACHE_ENABLED=true
SUPEREGO_CACHE_TTL=3600
SUPEREGO_CACHE_MAX_SIZE=1000

# ============================================================================
# DATABASE AND STORAGE
# ============================================================================

# Redis Configuration
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=your_redis_password_here
REDIS_MAX_CONNECTIONS=10

# ============================================================================
# MONITORING AND OBSERVABILITY
# ============================================================================

# Metrics Configuration
SUPEREGO_METRICS_ENABLED=true
SUPEREGO_METRICS_PATH=/metrics
SUPEREGO_METRICS_PORT=8001

# Health Check Configuration
SUPEREGO_HEALTH_CHECK_PATH=/health
SUPEREGO_HEALTH_CHECK_TIMEOUT=10

# Tracing Configuration
SUPEREGO_TRACING_ENABLED=false
SUPEREGO_TRACING_ENDPOINT=http://jaeger:14268/api/traces
SUPEREGO_TRACING_SERVICE_NAME=superego-mcp

# Structured Logging
SUPEREGO_LOG_STRUCTURED=true
SUPEREGO_LOG_INCLUDE_TRACE_ID=true

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Feature toggles for production
SUPEREGO_DEBUG=false
SUPEREGO_HOT_RELOAD=false
SUPEREGO_DEVELOPMENT_MODE=false

# Security features
SUPEREGO_SECURITY_HEADERS_ENABLED=true
SUPEREGO_REQUEST_ID_ENABLED=true

# Advanced features
SUPEREGO_ASYNC_PROCESSING=true
SUPEREGO_BATCH_PROCESSING=true

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Container Resource Limits (for documentation)
CONTAINER_MEMORY_LIMIT=2G
CONTAINER_CPU_LIMIT=2.0
CONTAINER_MEMORY_RESERVATION=512M
CONTAINER_CPU_RESERVATION=0.5

# Network Configuration
SUPEREGO_DOMAIN=superego.your-domain.com
SUPEREGO_HTTP_PORT=80
SUPEREGO_HTTPS_PORT=443

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/superego.crt
SSL_KEY_PATH=/etc/ssl/private/superego.key

# ============================================================================
# BACKUP AND DISASTER RECOVERY
# ============================================================================

# Backup configuration paths (for external backup systems)
BACKUP_CONFIG_PATH=/app/data/config.yaml
BACKUP_RULES_PATH=/app/data/rules.yaml
BACKUP_LOGS_PATH=/app/logs/
BACKUP_RETENTION_DAYS=30

# ============================================================================
# COMPLIANCE AND AUDIT
# ============================================================================

# Audit logging
SUPEREGO_AUDIT_ENABLED=true
SUPEREGO_AUDIT_LOG_PATH=/app/logs/audit.log
SUPEREGO_AUDIT_INCLUDE_REQUEST_BODY=false
SUPEREGO_AUDIT_INCLUDE_RESPONSE_BODY=false

# Data retention
SUPEREGO_DATA_RETENTION_DAYS=90
SUPEREGO_LOG_RETENTION_DAYS=30

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================

# Webhook configuration (if supported)
SUPEREGO_WEBHOOK_ENABLED=false
SUPEREGO_WEBHOOK_URL=https://your-webhook-endpoint.com
SUPEREGO_WEBHOOK_SECRET=your_webhook_secret_here

# External monitoring systems
PROMETHEUS_PUSHGATEWAY_URL=http://pushgateway:9091
GRAFANA_URL=http://grafana:3000

# ============================================================================
# NOTES AND WARNINGS
# ============================================================================

# WARNING: Ensure all secrets are properly secured
# - Use a secure secret management system in production
# - Rotate API keys regularly  
# - Monitor for secret exposure in logs
# - Use network policies to restrict access between services

# PERFORMANCE NOTES:
# - Adjust SUPEREGO_WORKERS based on CPU cores (typically 1-2x CPU cores)
# - Monitor memory usage and adjust limits accordingly
# - Use Redis for caching in multi-instance deployments

# SECURITY NOTES:
# - Enable TLS termination at load balancer level
# - Use network segmentation for different service tiers
# - Regularly scan for vulnerabilities
# - Implement proper backup and disaster recovery procedures